function TransverseMercatorReferential(name,xGeodeticDatum,yGeodeticDatum,zGeodeticDatum,semiMajorAxis,eccentricity2,lon0,lat0,scale){this.a_wgs84=6378137.0;this.e_wgs84=Math.sqrt(2/298.257223563-1/Math.pow(298.257223563,2));this.f_wgs84=1/298.257223563;this.e2_wgs84=this.e_wgs84*this.e_wgs84;this.FC1=1.0;this.FC2=0.5;this.FC3=0.16666666666666666666;this.FC4=0.08333333333333333333;this.FC5=0.5;this.FC6=0.03333333333333333333;this.FC7=0.02380952380952380952;this.FC8=0.01785714285714285714;this.CreateConstants(xGeodeticDatum,yGeodeticDatum,zGeodeticDatum,semiMajorAxis,eccentricity2,lon0,lat0,scale);}TransverseMercatorReferential.prototype.getGroundPixelSize=function(psp,uJ,uz){return psp/this.k0;};TransverseMercatorReferential.prototype.wgs84ToMapRef=function(uJ,uz){var geo=this.wgs84ToEG(uJ,uz);var lambda=geo.x;var phi=geo.y;var sinphi=Math.sin(phi);var sin2phi=Math.sin(2*phi);var sin4phi=Math.sin(4*phi);var sin6phi=Math.sin(6*phi);var sin8phi=Math.sin(8*phi);var sinphi2=Math.pow(sinphi,2);var cosphi=Math.cos(phi);var cosphi2=Math.pow(cosphi,2);var cosphi3=Math.pow(cosphi,3);var cosphi4=Math.pow(cosphi,4);var tanphi=Math.tan(phi);var N=this.a/Math.sqrt(1-this.e2*sinphi2);var T=Math.pow(tanphi,2);var T2=Math.pow(T,2);var C=this.ep2*Math.pow(cosphi,2);var C2=Math.pow(C,2);var A=(lambda-this.lambda0)*cosphi;var A2=Math.pow(A,2);var A3=Math.pow(A,3);var A4=Math.pow(A,4);var A5=Math.pow(A,5);var A6=Math.pow(A,6);var M=this.a*((1-this.e2/4-3*this.e4/64-5*this.e6/256)*phi-(3*this.e2/8+3*this.e4/32+45*this.e6/1024)*sin2phi+(15*this.e4/256+45*this.e6/1024)*sin4phi-(35*this.e6/3072)*sin6phi);var easting=this.falseEasting+this.k0*N*(A+(1-T+C)*A3/6+(5-18*T+T2+72*C-58*this.ep2)*A5/120);var northing=this.falseNorthing+this.k0*(M-this.M0+N*tanphi*(A2/2+(5-T+9*C+4*C2)*A4/24+(61-58*T+T2+600*C-330*this.ep2)*A6/720));return new google.maps.Point(easting,northing);};TransverseMercatorReferential.prototype.mapRefToWGS84=function(easting,northing){var M=this.M0+(northing-this.falseNorthing)/this.k0;var mumu=M/(this.a*(1-this.e2/4-3*this.e4/64-5*this.e6/256));var phi1=mumu+(3*this.n/2-27*this.n3/32)*Math.sin(2*mumu)+(21*this.n2/16-55*this.n4/32)*Math.sin(4*mumu)+(151*this.n3/96)*Math.sin(6*mumu)+(1097*this.n4/512)*Math.sin(8*mumu);var cosphi1=Math.cos(phi1);var sinphi1=Math.sin(phi1);var N1=this.a/Math.sqrt(1-this.e2*sinphi1*sinphi1);var D=(easting-this.falseEasting)/(N1*this.k0);var D2=Math.pow(D,2);var D3=Math.pow(D,3);var D4=Math.pow(D,4);var D5=Math.pow(D,5);var D6=Math.pow(D,6);var C1=this.ep2*cosphi1*cosphi1;var T1=Math.pow(Math.tan(phi1),2);var lambda=this.lambda0+(D-(1+2*T1+C1)*D3/6+(5-2*C1+28*T1-3*C1*C1+8*this.ep2+24*T1*T1)*D5/120)/cosphi1;var R1=this.a*(1-this.e2)/Math.pow(1-this.e2*sinphi1*sinphi1,3/2);var phi=phi1-(N1*Math.tan(phi1)/R1)*(D2/2-(5+3*T1+10*C1-4*C1*C1-9*this.ep2)*D4/24+(61+90*T1+298*C1+45*T1*T1-252*this.ep2-3*C1*C1)*D6/720);var geo=this.EgToWgs84(lambda,phi);var uJ=geo.x;var uz=geo.y;return new google.maps.LatLng(uz,uJ);};TransverseMercatorReferential.prototype.EgToWgs84=function(lambda,phi){var sinphi=Math.sin(phi);var sin2phi=Math.sin(2*phi);var cosphi=Math.cos(phi);var sinlambda=Math.sin(lambda);var coslambda=Math.cos(lambda);var N=this.a/Math.sqrt(1-Math.pow(this.e*sinphi,2));var lambda84=lambda+(-this.Tx*sinlambda+this.Ty*coslambda)/(N*cosphi);var rho=this.a*(1-this.e*this.e)/Math.pow(1-Math.pow(this.e*sinphi,2),3/2);var df=(this.f_wgs84-this.f);var da=(this.a_wgs84-this.a);var phi84=phi+(-this.Tx*sinphi*coslambda-this.Ty*sinphi*sinlambda+this.Tz*cosphi+(this.a*df+this.f*da)*sin2phi)/rho;return new google.maps.Point(lambda84*180/Math.PI,phi84*180/Math.PI);};TransverseMercatorReferential.prototype.wgs84ToEG=function(uJ,uz){var lambda84=uJ*Math.PI/180;var phi84=uz*Math.PI/180;var sinphi84=Math.sin(phi84);var sin2phi84=Math.sin(2*phi84);var cosphi84=Math.cos(phi84);var sinlambda84=Math.sin(lambda84);var coslambda84=Math.cos(lambda84);var N84=this.a_wgs84/Math.sqrt(1-Math.pow(this.e_wgs84*sinphi84,2));var lambda2=lambda84+(this.Tx*sinlambda84-this.Ty*coslambda84)/(N84*cosphi84);var rho84=this.a_wgs84*(1-this.e_wgs84*this.e_wgs84)/Math.pow(1-Math.pow(this.e_wgs84*sinphi84,2),3/2);var df=(this.f-this.f_wgs84);var da=(this.a-this.a_wgs84);var phi2=phi84+(this.Tx*sinphi84*coslambda84+this.Ty*sinphi84*sinlambda84-this.Tz*cosphi84+(this.a_wgs84*df+this.f_wgs84*da)*sin2phi84)/rho84;return new google.maps.Point(lambda2,phi2);};TransverseMercatorReferential.prototype.CreateConstants=function(xGeodeticDatum,yGeodeticDatum,zGeodeticDatum,semiMajorAxis,eccentricity2,lon0,lat0,scale){this.Tx=xGeodeticDatum;this.Ty=yGeodeticDatum;this.Tz=zGeodeticDatum;this.a=semiMajorAxis;this.e2=eccentricity2;this.k0=scale;this.lambda0=lon0*Math.PI/180;var phi0=lat0*Math.PI/180;this.e4=Math.pow(this.e2,2);this.e6=Math.pow(this.e2,3);this.e8=Math.pow(this.e2,4);this.e=Math.sqrt(this.e2);this.ep2=this.e2/(1-this.e2);this.n=(1-Math.sqrt(1-this.e2))/(1+Math.sqrt(1-this.e2));this.n2=Math.pow(this.n,2);this.n3=Math.pow(this.n,3);this.n4=Math.pow(this.n,4);this.n5=Math.pow(this.n,5);this.f=1-Math.sqrt(1-this.e2);this.falseEasting=0.0;this.falseNorthing=0.0;this.unitOfMeasure=1.0;var sin2phi0=Math.sin(2*phi0);var sin4phi0=Math.sin(4*phi0);var sin6phi0=Math.sin(6*phi0);this.M0=this.a*((1-this.e2/4-3*this.e4/64-5*this.e6/256)*phi0-(3*this.e2/8+3*this.e4/32+45*this.e6/1024)*sin2phi0+(15*this.e4/256+45*this.e6/1024)*sin4phi0-(35*this.e6/3072)*sin6phi0);};